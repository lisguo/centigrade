<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head(${show.seriesName})"></head>
<body>
<div th:replace="fragments :: navbar"></div>
<div class="container container-fluid">
    <div class="content-row-block">
        <!--<div th:replace="fragments :: navbar"></div>-->
        <table width="100%">
            <tr>
                <td height="70"></td>
                <td></td>
                <td></td>
            </tr>
        </table>
        <table>
            <tr>
                <td>
                    <img th:src="@{${posterURL} + 'tvposter' + ${show.id} + '.jpg'}" width="225" height="330"/>
                </td>

                <td>
                    <table>
                        <tr>
                            <td>
                                <b th:text="${show.seriesName}"/>
                            </td>
                        </tr>
                        <tr>
                            <td th:text="${show.overview}"/>
                        </tr>

                        <tr>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <b>Rated: </b>
                                        </td>
                                        <td th:text="${show.contentRating}"/>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Genre: </b>
                                        </td>
                                        <td th:text="${show.genres}"/>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>First Aired: </b>
                                        </td>
                                        <td th:text="${show.firstAired}"/>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Language: </b>
                                        </td>
                                        <td th:text="${show.language}"/>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Runtime: </b>
                                        </td>
                                        <td th:text="${show.runtime}"/>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Network: </b>
                                        </td>
                                        <td th:text="${show.network}"/>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Status: </b>
                                        </td>
                                        <td th:text="${show.status}"/>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <form action="/add_review" method="post">
                                    <table>
                                        <tr th:if="${message != null}">
                                            <td th:text="@{${message}}" />
                                        </tr>
                                        <tr>
                                            <td th:text="@{'Rating: ' + ${rating} + ' (Reviews Counted: ' + ${reviewsCounted} + ')'}"/>
                                        </tr>
                                        <tr>
                                            <td>
                                                <b>Add Your Rating</b>
                                                <input type="range" min="0" max="100" step="1" th:value="${show.overallRating}" name="rating"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <textarea rows="4" cols="50" name="reviewtext" maxlength="520">Add Review (Optional)
                                                </textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="submit"/>
                                            </td>
                                        </tr>
                                    </table>
                                    <input type="hidden" th:value="${show.id}" name="contentID"/>
                                </form>
                                <form action="add_to_wishlist" method="post">
                                    <table>
                                        <tr>
                                            <td th:text="@{'Add To WishList&nbsp;'}"></td>
                                            <td>
                                                <input type="submit" value="&nbsp;+&nbsp;" />
                                            </td>
                                        </tr>
                                    </table>
                                    <input type="hidden" th:value="${show.id}" name="contentID" />
                                </form>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>


        <table>
            <tr>
                <td>
                    <b>CAST</b>
                </td>
            </tr>
            <tr>
                <td th:each="person : ${cast}">
                    <table>
                        <tr>
                            <td><img th:src="@{${photoURL} + 'pic' + ${person.id} + '.jpg'}" width="200" height="200"/>
                            </td>
                        </tr>
                        <tr>
                            <td><a th:href="@{'/person?id=' + ${person.id}}" th:text="${person.toString()}"/></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <table>
            <tr>
                <td>
                    <b>SEASONS</b>
                </td>
            </tr>
            <tr>
                <table>
                    <tr>
                        <option th:each="i : ${#numbers.sequence(1, show.numSeasons)}">
                            <td>
                                <a th:href="@{'/show?id=' + ${show.id} + '&amp;season=' + ${i}}"
                                   th:text="@{'Season ' + ${i}}"/>
                            </td>
                        </option>
                    </tr>
                </table>
            </tr>
        </table>
        <ol>
            <li th:each="episode : ${season}">
                <a th:href="@{'/episode?id=' + ${episode.id}}" th:text="${episode.episodeName}"/>
            </li>
        </ol>

        <table>
            <tr>
                <td>
                    <b>CRITIC REVIEWS</b>
                </td>
            </tr>
            <tr th:each="cr : ${criticReviews}">
                <table frame="box" width="600" rules="rows">
                    <tr>
                        <td>
                            <a th:href="@{'/profile?id=' + ${cr.userId}}" th:text="@{${cr.userName}}"></a>

                        </td>
                        <td th:text="@{'Rating: ' + ${cr.rating} + '%'}"/>
                        <td th:if="${session.account != null and cr.userId == session.account.id}">
                            <form action = "edit_review" method="get">
                                <input type="hidden" th:value="${cr.id}" name="id" />
                                <input type="submit" value="Edit" />
                            </form>
                        </td>
                        <td th:if="${session.account != null and cr.userId == session.account.id}">
                            <form action = "delete_review" method="post">
                                <input type="hidden" th:value="${cr.id}" name="id" />
                                <input type="submit" value="X" />
                            </form>
                        </td>
                    </tr>
                    <tr th:unless="${cr.reviewText == null}">
                        <td th:if="${session.account != null and cr.userId == session.account.id}" th:colspan="4" th:text="${cr.reviewText}"/>
                        <td th:unless="${session.account != null and cr.userId == session.account.id}" th:colspan="2" th:text="${cr.reviewText}"/>
                    </tr>
                </table>
                <p th:utext="@{'&lt;br&gt;'}"></p>
            </tr>
        </table>

        <table>
            <tr>
                <td>
                    <b>USER REVIEWS</b>
                </td>
            </tr>
            <tr th:each="ur : ${userReviews}">
                <table frame="box" width="600" rules="rows">
                    <tr>
                        <td>
                            <a th:href="@{'/profile?id=' + ${ur.userId}}" th:text="@{${ur.userName}}"></a>

                        </td>
                        <td th:text="@{'Rating: ' + ${ur.rating} + '%'}"/>
                        <td th:if="${session.account != null and ur.userId == session.account.id}">
                            <form action = "edit_review" method="get">
                                <input type="hidden" th:value="${ur.id}" name="id" />
                                <input type="submit" value="Edit" />
                            </form>
                        </td>
                        <td th:if="${session.account != null and ur.userId == session.account.id}">
                            <form action = "delete_review" method="post">
                                <input type="hidden" th:value="${ur.id}" name="id" />
                                <input type="submit" value="X" />
                            </form>
                        </td>
                    </tr>
                    <tr th:unless="${ur.reviewText == null}">
                        <td th:if="${session.account != null and ur.userId == session.account.id}" th:colspan="4" th:text="${ur.reviewText}"/>
                        <td th:unless="${session.account != null and ur.userId == session.account.id}" th:colspan="2" th:text="${ur.reviewText}"/>
                    </tr>
                </table>
                <p th:utext="@{'&lt;br&gt;'}"></p>
            </tr>
        </table>
    </div>
</div>
</body>
</html>