<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head(AllShows)"></head>

<body>
<div th:replace="fragments :: navbar"></div>
<div class="container container-fluid">
    <h1>All Shows</h1>

    <!-- SORT BUTTONS -->
    <form action="/shows" method="get">
        <div class="row">
            <div class="col">
                <select class="custom-select" name="sortBy">
                    <option th:each="crit:${sortCriteria}"
                            th:value="${crit}"
                            th:text="${crit}"
                            th:selected="${crit.toString().equals(sortBy)}"/>
                </select>
            </div>
            <div class="col">
                <select class="custom-select" name="sortDirection">
                    <option th:each="dir:${sortDirections}"
                            th:value="${dir}"
                            th:text="${dir}"
                            th:selected="${dir.toString().equals(sortDirection)}"/>
                </select>
            </div>
            <button type="submit" class="btn btn-outline-primary">Sort</button>
        </div>
    </form>

    <!-- SHOW RESULTS -->
    <table class="table table-striped">
        <thead>
            <th scope="col" colspan="2">Rating</th>
            <th scope="col"></th>
            <th scope="col">Title</th>
            <th scope="col">Info</th>
        </thead>
        <tbody>
            <tr th:each="show : ${shows}">
                <td colspan="2" th:if="${show.hasBeenRated()}">
                    <div th:if="${decimalFormat.format(show.getOverallRating())} &lt; 20.0">
                        <img style="padding-right: 15px;" th:src="@{/img/ratings/snow.png}" alt="Cold" />
                        <p th:text="@{${decimalFormat.format(show.getOverallRating())} + '%'}"/>
                    </div>
                    <div th:unless="${decimalFormat.format(show.getOverallRating())} &lt; 20.0">
                        <div th:if="${decimalFormat.format(show.getOverallRating())} &lt; 40.0">
                            <img style="padding-right: 15px;" th:src="@{/img/ratings/cloudy.png}" alt="Cloudy" />
                            <p th:text="@{${decimalFormat.format(show.getOverallRating())} + '%'}"/>
                        </div>
                        <div th:unless="${decimalFormat.format(show.getOverallRating())} &lt; 40.0">
                            <div th:if="${decimalFormat.format(show.getOverallRating())} &lt; 60.0">
                                <img style="padding-right: 15px;" th:src="@{/img/ratings/mediocre.png}" alt="Mediocre" />
                                <p th:text="@{${decimalFormat.format(show.getOverallRating())} + '%'}"/>
                            </div>
                            <div th:unless="${decimalFormat.format(show.getOverallRating())} &lt; 60.0">
                                <div th:if="${decimalFormat.format(show.getOverallRating())} &lt; 80.0">
                                    <img style="padding-right: 15px;" th:src="@{/img/ratings/sun.png}" alt="Sunny" />
                                    <p th:text="@{${decimalFormat.format(show.getOverallRating())} + '%'}"/>
                                </div>
                                <div th:unless="${decimalFormat.format(show.getOverallRating())} &lt; 80.0">
                                    <img style="padding-right: 15px;" th:src="@{/img/ratings/flame.png}" alt="Flame" />
                                    <p th:text="@{${decimalFormat.format(show.getOverallRating())} + '%'}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
                <td colspan="2" th:unless="${show.hasBeenRated()}">
                    <p th:text="@{'N/A'}"/>
                </td>
                <td>
                    <img th:src="@{${posterURL} + 'tvposter' + ${show.id} + '.jpg'}" width="90" height="132"/>
                </td>
                <td>
                    <a th:href="@{'/show?id=' + ${show.id}}" th:text="${show.seriesName}"/>
                </td>
                <td>
                    <p th:if="${show.firstAired != null}" th:text="@{'(First Aired: ' + ${show.firstAired} + ')'}"></p>
                    <p th:if="${show.firstAired == null}" th:text="@{'(First Aired: N/A)'}"></p>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- PAGINATION -->
    <div class="container">
        <div class="row padding-top-bottom" style="text-align: center;">
            <div class="col" th:if="${prev!=null}"> <a th:href="${prev}"> Prev.</a></div>
            <div class="col" th:if="${prev==null}"> Prev.</div>

            <div class="col" th:if="${next!=null}"> <a th:href="${next}"> Next</a></div>
            <div class="col" th:if="${next==null}"> Next</div>
        </div>
    </div>
</div>
<div th:replace="fragments :: footer"></div>
</body>
</html>