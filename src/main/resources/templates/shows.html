<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head(AllShows)"></head>

<body>
<div th:replace="fragments :: navbar"></div>
<div class="container container-fluid">
    <h1>All Shows</h1>

    <!-- SORT BUTTONS -->
    <form action="/shows" method="get">
        <div class="row">
            <div class="col">
                <select class="custom-select" name="sortBy">
                    <option th:each="crit:${sortCriteria}"
                            th:value="${crit}"
                            th:text="${crit}"
                            th:selected="${crit.toString().equals(sortBy)}"/>
                </select>
            </div>
            <div class="col">
                <select class="custom-select" name="sortDirection">
                    <option th:each="dir:${sortDirections}"
                            th:value="${dir}"
                            th:text="${dir}"
                            th:selected="${dir.toString().equals(sortDirection)}"/>
                </select>
            </div>
            <button type="submit" class="btn btn-outline-primary">Sort</button>
        </div>
    </form>

    <!-- SHOW RESULTS -->
    <table class="table table-striped">
        <thead>
            <th scope="col">Rating</th>
            <th scope="col"></th>
            <th scope="col">Title</th>
            <th scope="col">Info</th>
        </thead>
        <tbody>
            <tr th:each="show : ${shows}">
                <div th:if="${show.hasBeenRated()}">
                    <td th:text="@{${decimalFormat.format(show.getOverallRating())} + '%'}"/>
                </div>
                <div th:unless="${show.hasBeenRated()}">
                    <td th:text="@{'N/A'}"/>
                </div>
                <td>
                    <img th:src="@{${posterURL} + 'tvposter' + ${show.id} + '.jpg'}" width="90" height="132"/>
                </td>
                <td>
                    <a th:href="@{'/show?id=' + ${show.id}}" th:text="${show.seriesName}"/>
                </td>
                <td>
                    <p th:if="${show.firstAired != null}" th:text="@{'(First Aired: ' + ${show.firstAired} + ')'}"></p>
                    <p th:if="${show.firstAired == null}" th:text="@{'(First Aired: N/A)'}"></p>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- PAGINATION -->
    <div class="container">
        <div class="row">
            <div th:if="${prev!=null}"> <a th:href="${prev}"> Prev.</a></div>
            <div th:if="${prev==null}"> Prev.</div>
            <div>   </div>
            <div th:if="${next!=null}"> <a th:href="${next}"> Next</a></div>
            <div th:if="${next==null}"> Next</div>
        </div>
    </div>
</div>
<div th:replace="fragments :: footer"></div>
</body>
</html>