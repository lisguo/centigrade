<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head(${user.toString()})"></head>
<body>
<div th:replace="fragments :: navbar"></div>
<div class="container container-fluid">
    <div class="content-row-block">
        <!--<div th:replace="fragments :: navbar"></div>-->
        <table width="100%">
            <tr>
                <td height="70"></td>
                <td></td>
                <td></td>
            </tr>
        </table>
        <table>
            <tr>
                <td th:text="${user.toString()}"/>
            </tr>
        </table>
        <table>
            <tr>
                <td>
                    <b>MOVIE REVIEWS</b>
                </td>
            </tr>
            <tr th:each="mr : ${movieReviews}">
                <table frame="box" width="600" rules="rows">
                    <tr>
                        <td>
                            <a th:href="@{'/movie?id=' + ${mr.contentId}}" th:text="@{${mr.contentName}}"></a>
                        </td>

                        <td th:text="@{'Rating: ' + ${mr.rating} + '%'}"/>
                        <td th:if="${session.account != null and mr.userId == session.account.id}">
                            <form action = "edit_review" method="get">
                                <input type="hidden" th:value="${mr.id}" name="id" />
                                <input type="hidden" th:value="@{'true'}" name="fromProfile" />
                                <input type="submit" value="Edit" />
                            </form>
                        </td>
                        <td th:if="${session.account != null and mr.userId == session.account.id}">
                            <form action = "delete_review" method="post">
                                <input type="hidden" th:value="${mr.id}" name="id" />
                                <input type="hidden" th:value="@{'true'}" name="fromProfile" />
                                <input type="submit" value="X" />
                            </form>
                        </td>
                    </tr>
                    <tr th:unless="${mr.reviewText == null}">
                        <td th:if="${session.account != null and mr.userId == session.account.id}" th:colspan="4" th:text="${mr.reviewText}"/>
                        <td th:unless="${session.account != null and mr.userId == session.account.id}" th:colspan="2" th:text="${mr.reviewText}"/>
                    </tr>
                </table>
                <p th:utext="@{'&lt;br&gt;'}"></p>
            </tr>
        </table>

        <table>
            <tr>
                <td>
                    <b>TV SHOW REVIEWS</b>
                </td>
            </tr>
            <tr th:each="sr : ${showReviews}">
                <table frame="box" width="600" rules="rows">
                    <tr>
                        <td>
                            <a th:href="@{'/show?id=' + ${sr.contentId}}" th:text="@{${sr.contentName}}"></a>
                        </td>
                        <td th:text="@{'Rating: ' + ${sr.rating} + '%'}"/>
                        <td th:if="${session.account != null and sr.userId == session.account.id}">
                            <form action = "edit_review" method="get">
                                <input type="hidden" th:value="${sr.id}" name="id" />
                                <input type="hidden" th:value="@{'true'}" name="fromProfile" />
                                <input type="submit" value="Edit" />
                            </form>
                        </td>
                        <td th:if="${session.account != null and sr.userId == session.account.id}">
                            <form action = "delete_review" method="post">
                                <input type="hidden" th:value="${sr.id}" name="id" />
                                <input type="hidden" th:value="@{'true'}" name="fromProfile" />
                                <input type="submit" value="X" />
                            </form>
                        </td>
                    </tr>
                    <tr th:unless="${sr.reviewText == null}">
                        <td th:if="${session.account != null and sr.userId == session.account.id}" th:colspan="4" th:text="${sr.reviewText}"/>
                        <td th:unless="${session.account != null and sr.userId == session.account.id}" th:colspan="2" th:text="${sr.reviewText}"/>
                    </tr>
                </table>
                <p th:utext="@{'&lt;br&gt;'}"></p>
            </tr>
        </table>

        <table>
            <tr>
                <td>
                    <b>WISH LIST</b>
                </td>
            </tr>
            <td th:each="item : ${wishList}">
                <table>
                    <tr th:if="${session.account != null and user.id == session.account.id}">
                        <form action="remove_from_wishlist" method="post">
                            <input type="hidden" th:value="${item.getId()}" name="contentID" />
                            <input type="submit" value="X" />
                        </form>
                    </tr>
                    <tr>
                        <td th:if="${item.getType().equals('movie')}">
                            <img th:src="@{${posterURL} + 'poster' + ${item.getId()} + '.jpg'}" width="200" height="200"/>
                        </td>
                        <td th:unless="${item.getType().equals('movie')}">
                            <img th:src="@{${tvPosterURL} + 'tvposter' + ${item.getId()} + '.jpg'}" width="200" height="200"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a th:href="@{'/' + ${item.getType()} + '?id=' + ${item.getId()}}" th:text="${item.getTitle()}"/>
                        </td>
                    </tr>
                </table>
            </td>
        </table>
    </div>
</div>

</body>
</html>